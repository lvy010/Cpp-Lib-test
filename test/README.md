# Test Directory - Muduoç½‘ç»œåº“æµ‹è¯•é›†åˆ

è¿™ä¸ªç›®å½•åŒ…å«äº†åŸºäºMuduoç½‘ç»œåº“çš„å„ç§åŠŸèƒ½æµ‹è¯•ç¨‹åºï¼Œæ¶µç›–äº†å¤šçº¿ç¨‹ã€äº‹ä»¶å¾ªç¯ã€ç½‘ç»œé€šä¿¡ã€ç¼“å†²åŒºç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½çš„ä½¿ç”¨ç¤ºä¾‹ã€‚

## ğŸ“ æ–‡ä»¶æ¦‚è§ˆ

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | æ ¸å¿ƒæŠ€æœ¯ |
|--------|----------|----------|
| `test_simple_thread.cpp` | åŸºç¡€çº¿ç¨‹æµ‹è¯• | Thread, CurrentThread |
| `test_thread_eventloop.cpp` | çº¿ç¨‹ä¸­çš„äº‹ä»¶å¾ªç¯ | EventLoop, Thread |
| `threadpool_test.cpp` | çº¿ç¨‹æ± åŠŸèƒ½æµ‹è¯• | ThreadPool, CountDownLatch |
| `timerfd_channel.cpp` | å®šæ—¶å™¨å’ŒChannelæµ‹è¯• | timerfd, Channel, EventLoop |
| `buffer_test.cpp` | ç¼“å†²åŒºæ“ä½œæµ‹è¯• | Bufferè¯»å†™æ“ä½œ |
| `echo_server.cpp` | TCPå›å£°æœåŠ¡å™¨ | TcpServer, å¤šçº¿ç¨‹I/O |
| `echo_client.cpp` | TCPå›å£°å®¢æˆ·ç«¯ | TcpClient, å¼‚æ­¥è¿æ¥ |
| `test_eventloop.cpp` | äº‹ä»¶å¾ªç¯åŸºç¡€æµ‹è¯• | EventLoop, å®šæ—¶ä»»åŠ¡ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘è¦æ±‚
- C++11æˆ–æ›´é«˜ç‰ˆæœ¬
- Muduoç½‘ç»œåº“
- Linuxç³»ç»Ÿï¼ˆä½¿ç”¨epollã€timerfdç­‰Linuxç‰¹æœ‰åŠŸèƒ½ï¼‰

### ç¼–è¯‘æ–¹æ³•
```bash
# å•ä¸ªæ–‡ä»¶ç¼–è¯‘ç¤ºä¾‹
g++ -std=c++11 -o test_simple_thread test_simple_thread.cpp -lmuduo_net -lmuduo_base -lpthread

# æˆ–ä½¿ç”¨CMake/Makefileï¼ˆå¦‚æœé¡¹ç›®ä¸­æœ‰é…ç½®ï¼‰
make test_simple_thread
```

## ğŸ“š è¯¦ç»†åŠŸèƒ½è¯´æ˜

### 1. çº¿ç¨‹ç›¸å…³æµ‹è¯•

#### `test_simple_thread.cpp` - åŸºç¡€çº¿ç¨‹æµ‹è¯•
**åŠŸèƒ½**: æ¼”ç¤ºMuduo Threadç±»çš„åŸºæœ¬ä½¿ç”¨
- åˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡ŒæŒ‡å®šå‡½æ•°
- çº¿ç¨‹åŒæ­¥ï¼ˆjoinï¼‰
- çº¿ç¨‹IDè·å–å’Œæ˜¾ç¤º

**è¿è¡Œæ•ˆæœ**:
```
ä¸»çº¿ç¨‹å¯åŠ¨. è¿›ç¨‹ID: 12345, çº¿ç¨‹ID: 12345
çº¿ç¨‹å¯¹è±¡å·²åˆ›å»º
æ­£åœ¨å¯åŠ¨æ–°çº¿ç¨‹...
ä¸»çº¿ç¨‹ç­‰å¾…æ–°çº¿ç¨‹ç»“æŸ...
è¿›å…¥myThreadFunction. è¿›ç¨‹ID: 12345, çº¿ç¨‹ID: 12346
myThreadFunctionæ‰§è¡Œå®Œæ¯•
æ–°çº¿ç¨‹å·²ç»“æŸ. ä¸»çº¿ç¨‹é€€å‡º
```

#### `threadpool_test.cpp` - çº¿ç¨‹æ± æµ‹è¯•
**åŠŸèƒ½**: å±•ç¤ºThreadPoolçš„ä»»åŠ¡è°ƒåº¦èƒ½åŠ›
- åˆ›å»ºå›ºå®šæ•°é‡çš„å·¥ä½œçº¿ç¨‹
- ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- å¹¶å‘ä»»åŠ¡æ‰§è¡Œ

**å…³é”®ç‰¹æ€§**:
- çº¿ç¨‹æ± å¤§å°ï¼š3ä¸ªå·¥ä½œçº¿ç¨‹
- é˜Ÿåˆ—å®¹é‡ï¼š5ä¸ªä»»åŠ¡
- ä»»åŠ¡æ•°é‡ï¼š10ä¸ªï¼ˆå±•ç¤ºé˜Ÿåˆ—ç®¡ç†ï¼‰

### 2. äº‹ä»¶å¾ªç¯æµ‹è¯•

#### `test_eventloop.cpp` - åŸºç¡€äº‹ä»¶å¾ªç¯
**åŠŸèƒ½**: EventLoopçš„åŸºæœ¬ä½¿ç”¨å’Œå®šæ—¶ä»»åŠ¡
- åˆ›å»ºäº‹ä»¶å¾ªç¯å®ä¾‹
- å»¶æ—¶å›è°ƒæ‰§è¡Œï¼ˆrunAfterï¼‰
- çº¿ç¨‹å½’å±æ£€æŸ¥

#### `test_thread_eventloop.cpp` - å¤šçº¿ç¨‹äº‹ä»¶å¾ªç¯
**åŠŸèƒ½**: åœ¨å­çº¿ç¨‹ä¸­è¿è¡ŒEventLoop
- çº¿ç¨‹å®‰å…¨çš„EventLoopåˆ›å»º
- è·¨çº¿ç¨‹äº‹ä»¶å¾ªç¯ç®¡ç†
- çº¿ç¨‹æœ¬åœ°EventLoopæ£€æŸ¥

#### `timerfd_channel.cpp` - å®šæ—¶å™¨å’ŒChannel
**åŠŸèƒ½**: å±•ç¤ºå®šæ—¶å™¨fdä¸Channelçš„ç»“åˆä½¿ç”¨
- åˆ›å»ºtimerfdå®šæ—¶å™¨
- Channeläº‹ä»¶ç›‘å¬
- å‘¨æœŸæ€§å®šæ—¶å›è°ƒ

**æŠ€æœ¯è¦ç‚¹**:
- ä½¿ç”¨Linux timerfd API
- Channelè¯»äº‹ä»¶ç›‘å¬
- å®šæ—¶å™¨çŠ¶æ€é‡ç½®

### 3. ç½‘ç»œé€šä¿¡æµ‹è¯•

#### `echo_server.cpp` - TCPå›å£°æœåŠ¡å™¨
**åŠŸèƒ½**: é«˜æ€§èƒ½çš„å¤šçº¿ç¨‹TCPæœåŠ¡å™¨
- ç›‘å¬ç«¯å£9988
- 3ä¸ªI/Oçº¿ç¨‹å¤„ç†å¹¶å‘è¿æ¥
- ç®€å•çš„å›å£°åè®®å®ç°

**æœåŠ¡å™¨ç‰¹æ€§**:
- å¼‚æ­¥éé˜»å¡I/O
- è¿æ¥å»ºç«‹/æ–­å¼€å›è°ƒ
- é«˜æ•ˆçš„æ•°æ®å›ä¼ 

#### `echo_client.cpp` - TCPå›å£°å®¢æˆ·ç«¯
**åŠŸèƒ½**: å¼‚æ­¥TCPå®¢æˆ·ç«¯å®ç°
- è¿æ¥åˆ°localhost:9988
- è‡ªåŠ¨æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- è¿æ¥çŠ¶æ€ç®¡ç†

**å®¢æˆ·ç«¯ç‰¹æ€§**:
- å¼‚æ­¥è¿æ¥å»ºç«‹
- æ¶ˆæ¯æ”¶å‘å¤„ç†
- è¿æ¥æ–­å¼€è‡ªåŠ¨é€€å‡º

### 4. ç¼“å†²åŒºç®¡ç†

#### `buffer_test.cpp` - Bufferæ“ä½œæµ‹è¯•
**åŠŸèƒ½**: Muduo Bufferç±»çš„å®Œæ•´ä½¿ç”¨ç¤ºä¾‹
- æ•°æ®è¿½åŠ ï¼ˆappendï¼‰
- æ•°æ®çª¥è§†ï¼ˆpeekï¼‰
- éƒ¨åˆ†æ•°æ®æå–ï¼ˆretrieveï¼‰
- å®Œæ•´æ•°æ®æå–ï¼ˆretrieveAllAsStringï¼‰

**ç¼“å†²åŒºçŠ¶æ€è·Ÿè¸ª**:
- å¯è¯»å­—èŠ‚æ•°ï¼ˆreadableBytesï¼‰
- å¯å†™å­—èŠ‚æ•°ï¼ˆwritableBytesï¼‰
- é¢„ç•™ç©ºé—´ï¼ˆprependableBytesï¼‰

## ğŸ”§ ä½¿ç”¨å»ºè®®

### å­¦ä¹ é¡ºåºæ¨è
1. **åŸºç¡€æ¦‚å¿µ**: `test_simple_thread.cpp` â†’ `test_eventloop.cpp`
2. **è¿›é˜¶åŠŸèƒ½**: `threadpool_test.cpp` â†’ `test_thread_eventloop.cpp`
3. **ç³»ç»Ÿç¼–ç¨‹**: `timerfd_channel.cpp` â†’ `buffer_test.cpp`
4. **ç½‘ç»œç¼–ç¨‹**: `echo_server.cpp` + `echo_client.cpp`

### è¿è¡Œæµ‹è¯•
```bash
# 1. å…ˆè¿è¡ŒæœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
./echo_server

# 2. å†è¿è¡Œå®¢æˆ·ç«¯ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
./echo_client

# 3. å•ç‹¬æµ‹è¯•å…¶ä»–åŠŸèƒ½
./test_simple_thread
./threadpool_test
./buffer_test
```

### è°ƒè¯•æŠ€å·§
- ä½¿ç”¨`LOG_INFO`æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
- è§‚å¯Ÿè¿›ç¨‹IDå’Œçº¿ç¨‹IDå˜åŒ–
- ç›‘æ§ç½‘ç»œè¿æ¥çŠ¶æ€
- æ£€æŸ¥ç¼“å†²åŒºçŠ¶æ€å˜åŒ–

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒåº“**: Muduoç½‘ç»œåº“
- **ç³»ç»Ÿè°ƒç”¨**: epoll, timerfd, socket
- **å¹¶å‘æ¨¡å‹**: Reactoræ¨¡å¼ + çº¿ç¨‹æ± 
- **å†…å­˜ç®¡ç†**: RAII + æ™ºèƒ½æŒ‡é’ˆ
- **æ—¥å¿—ç³»ç»Ÿ**: Muduo Logging

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [Muduoç½‘ç»œåº“å®˜æ–¹æ–‡æ¡£](https://github.com/chenshuo/muduo)
- [Linuxç½‘ç»œç¼–ç¨‹](https://man7.org/linux/man-pages/)
- [C++å¹¶å‘ç¼–ç¨‹](https://en.cppreference.com/w/cpp/thread)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¹³å°ä¾èµ–**: è¿™äº›æµ‹è¯•ç¨‹åºä¾èµ–Linuxç‰¹æœ‰çš„APIï¼ˆepollã€timerfdç­‰ï¼‰
2. **åº“ä¾èµ–**: éœ€è¦é¢„å…ˆå®‰è£…Muduoåº“å’Œç›¸å…³ä¾èµ–
3. **æƒé™è¦æ±‚**: æŸäº›æµ‹è¯•å¯èƒ½éœ€è¦ç‰¹å®šçš„ç³»ç»Ÿæƒé™
4. **èµ„æºæ¸…ç†**: è¿è¡Œç½‘ç»œæµ‹è¯•åæ³¨æ„æ¸…ç†è¿æ¥å’Œç«¯å£å ç”¨

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§ç¼–è¯‘é”™è¯¯
- **æ‰¾ä¸åˆ°å¤´æ–‡ä»¶**: æ£€æŸ¥Muduoåº“å®‰è£…è·¯å¾„
- **é“¾æ¥é”™è¯¯**: ç¡®ä¿é“¾æ¥äº†æ­£ç¡®çš„åº“æ–‡ä»¶ï¼ˆ-lmuduo_net -lmuduo_baseï¼‰
- **C++æ ‡å‡†**: ä½¿ç”¨C++11æˆ–æ›´é«˜ç‰ˆæœ¬

### å¸¸è§è¿è¡Œæ—¶é”™è¯¯
- **ç«¯å£å ç”¨**: ç¡®ä¿9988ç«¯å£æœªè¢«å ç”¨
- **æƒé™ä¸è¶³**: æŸäº›ç³»ç»Ÿè°ƒç”¨å¯èƒ½éœ€è¦ç‰¹æ®Šæƒé™
- **åº“ç‰ˆæœ¬**: æ£€æŸ¥Muduoåº“ç‰ˆæœ¬å…¼å®¹æ€§

---

*è¿™äº›æµ‹è¯•ç¨‹åºæ˜¯å­¦ä¹ Muduoç½‘ç»œåº“å’ŒLinuxç³»ç»Ÿç¼–ç¨‹çš„ç»ä½³èµ„æºï¼Œå»ºè®®æŒ‰é¡ºåºè¿è¡Œå¹¶ä»”ç»†è§‚å¯Ÿè¾“å‡ºç»“æœã€‚*
