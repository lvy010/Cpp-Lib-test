# XRDP 性能优化工具包

专业的 XRDP 远程桌面性能优化解决方案，提供服务器端自动化优化脚本和客户端配置指南。

## 🎯 功能特性

- **一键优化**: 自动化服务器端性能调优
- **网络优化**: TCP 缓冲区和拥塞控制优化  
- **系统调优**: 内核参数自动配置
- **客户端指南**: 详细的客户端优化建议

## 📁 文件说明

| 文件 | 描述 |
|------|------|
| `optimize_xrdp.sh` | 服务器端一键优化脚本 |
| `xrdp_client_optimization.md` | 客户端优化配置指南 |

## 🚀 快速开始

### 服务器端优化

```bash
# 下载并执行优化脚本（需要 root 权限）
sudo bash optimize_xrdp.sh
```

**优化内容**:
- 调整 TCP 发送/接收缓冲区 (16MB)
- 启用 BBR 拥塞控制算法
- 自动重启 XRDP 服务
- 验证服务状态

### 客户端优化

参考 `xrdp_client_optimization.md` 文档进行客户端配置：

**核心建议**:
- 🖥️ **分辨率**: 1280x720 或更低
- 🎨 **视觉效果**: 禁用动画和合成器
- 🌐 **网络**: 使用有线连接，确保 < 50ms 延迟
- ⚡ **性能**: 选择 LAN 模式，启用网络优化

## ⚙️ 系统要求

- **服务器**: Linux 系统，已安装 XRDP
- **权限**: root 权限（用于系统参数调整）
- **网络**: 建议带宽 > 5Mbps，延迟 < 100ms

## 📊 性能指标

优化后预期改善：
- 🔄 **延迟降低**: 20-40%
- 📈 **吞吐量提升**: 30-50%  
- 🎯 **稳定性增强**: 减少断线和卡顿
- 💾 **内存效率**: 优化缓冲区管理

## ⚠️ 注意事项

1. **备份配置**: 优化前建议备份 `/etc/sysctl.conf`
2. **重启连接**: 优化后需重新建立客户端连接
3. **防火墙**: 确保端口 3389 开放
4. **兼容性**: 支持 Ubuntu/Debian/CentOS 等主流发行版

## 🛠️ 故障排除

### 常见问题
- **连接失败**: 检查 XRDP 服务状态和防火墙
- **性能无改善**: 验证客户端网络质量和配置
- **参数未生效**: 确认 `sysctl -p` 执行成功

### 诊断命令
```bash
# 检查服务状态
systemctl status xrdp

# 验证网络参数
sysctl net.ipv4.tcp_congestion_control
sysctl net.core.rmem_max

# 监控性能
netstat -i
ss -tuln | grep 3389
```

## 🤝 技术支持

如需帮助，请提供以下信息：
- 操作系统版本
- 网络环境描述
- 错误日志信息
- 性能测试结果

---

**版本**: 1.0  
**兼容性**: XRDP 0.9+ / Linux 内核 4.0+  
**许可证**: MIT
